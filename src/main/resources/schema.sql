DROP TABLE films, users, friendship, films_likes, films_and_genres CASCADE;

CREATE TABLE IF NOT EXISTS film_category (
id INTEGER PRIMARY KEY,
name VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS film_genre (
id INTEGER PRIMARY KEY,
name VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS films (
film_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR(255) NOT NULL,
description VARCHAR(200),
release_date DATE,
duration INTEGER,
category_id INTEGER REFERENCES film_category (id)
);

CREATE TABLE IF NOT EXISTS users (
user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
login VARCHAR(255),
e_mail VARCHAR(255),
name VARCHAR(255),
birthday DATE
);

CREATE TABLE IF NOT EXISTS films_likes (
like_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
film_id INTEGER REFERENCES films (film_id),
user_id INTEGER REFERENCES users (user_id)
);

CREATE TABLE IF NOT EXISTS friendship (
friendship_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
user_id INTEGER REFERENCES users (user_id),
friend_id INTEGER REFERENCES users (user_id)
);

CREATE TABLE IF NOT EXISTS films_and_genres (
id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
film_id INTEGER REFERENCES films (film_id),
genre_id INTEGER REFERENCES film_genre (id)
)
